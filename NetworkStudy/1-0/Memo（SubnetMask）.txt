～自分流解釈～
！IPアドレス計算の考え方

-問1-
以下のIPアドレスとサブネットマスクを確認し、「ネットワークアドレス」「ホストアドレス（使用可能IPの範囲）」
「ブロードキャストアドレス」「IPアドレスクラス」を例題のように求めてください。

例）IPアドレス：192.168.0.1　　サブネットマスク：255.255.255.128
　　ネットワークアドレス：192.168.0.0
　　ホストアドレス：192.168.0.1 ~ 192.168.0.126
　　ブロードキャストアドレス：192.168.0.127　（アドレス数：128）
　　IPアドレスクラス：クラスC

ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー
 
　（１）	IPアドレス：192.168.0.1　　　サブネットマスク：255.255.255.0

	＞ネットワーク部とホスト部
	サブネットマスク「255.255.255.0」＝「11111111.11111111.11111111.00000000」なので、
	IPアドレス「192.168.0.1」のうち「192.168.0」がネットワーク部、「.1」がホスト部になる。
	
	＞ネットワークアドレスとホストアドレス、ブロードキャストアドレス
	関係性のイメージ
	開始（ネットワークアドレス）：ホスト部が全部0のアドレス
	↓
	中間（ホストアドレス）：ネットワークアドレスとブロードキャストアドレスの間のアドレス
	↓
	終了（ブロードキャストアドレス）：ホスト部が全部1のアドレス

	上記の通り考えて、
	・ネットワークアドレス：「11000000.10101000.00000000.00000000（＝192.168.0.0）」
	・ホストアドレス：「11000000.10101000.00000000.00000001（＝192.168.0.1）」～「11000000.10101000.00000000.11111110（＝192.168.0.254）」
	・ブロードキャストアドレス：「11000000.10101000.00000000.11111111（＝192.168.0.255）」

	＞アドレス数
	アドレス総数はネットワークアドレスからブロードキャストアドレスまでの数
　　　　　つまり、2のホスト部の桁数乗になる。
	今回はホスト部が8桁のため、2の8乗＝256個

	＞ホストアドレス数
	ホストアドレス数は「アドレス数-2（ネットワークアドレス、ブロードキャストアドレス）」なので、
	今回は2の8乗-2＝254個

	＞IPアドレスのクラス
	今回のアドレスの範囲を2進数で表すと、「11000000.10101000.00000000.00000000」～「11000000.10101000.00000000.11111111」
	上位ビットが110のため、Cクラス
	※アドレスのクラスはネットワークアドレスで判断しよう！！


	＞回答
	ネットワークアドレス：192.168.0.0
	ホストアドレス：192.168.0.1～192.168.0.254
	ブロードキャストアドレス：192.168.0.255（アドレス数：256）
	IPアドレス：クラスC

ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー

　（２）	IPアドレス：192.168.0.1　　　サブネットマスク：255.255.0.0

	考え方は（１）と同様

	サブネットマスク「255.255.0.0」＝「11111111.11111111.00000000.00000000」なので、
	IPアドレス「192.168.0.1」のうち「192.168」がネットワーク部、「.0.1」がホスト部になる。
	
	※ホスト部だけ記載
	ネットワークアドレス「.00000000.00000000（.0.0）」
	↓
	ホストアドレス「.00000000.00000001（.0.1）」～「.11111111.11111110（.255.254）」
	↓
	ブロードキャストアドレス：「.11111111.11111111（.255.255）」

	今回はホスト部が16桁のため、アドレス数は2の16乗＝65,536個。ホストアドレス数は-2して65,534個
　　　　　※1オクテットが256（8桁）のため、2オクテット分（16桁）で256*256でもOK

	今回のIPアドレスの範囲を2進数で表すと、「11000000.10101000.00000000.00000000」～「11000000.10101000.11111111.11111111」
	上位ビットが110のため、Cクラスになる



	＞回答
	ネットワークアドレス：192.168.0.0
	ホストアドレス：192.168.0.1～192.168.255.254
	ブロードキャストアドレス：192.168.255.255（アドレス数：65,536）
	IPアドレス：クラスC

ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー
	
　（３）	IPアドレス：192.168.0.1　　　サブネットマスク：128.0.0.0

	考え方は（１）と同様

	サブネットマスク「128.0.0.0」＝「10000000.00000000.00000000.00000000」なので、最初の1桁がネットワーク部になる。

	つまり、IPアドレス「192.168.0.1」＝「11000000.10101000.00000000.00000001」のうち、
	「1」がネットワーク部、「1000000.10101000.00000000.00000001」がホスト部になる。
	
	ネットワークアドレス　＝（2進数）ネットワーク部「1」＋ホスト部「0000000.00000000.00000000」＝「10000000.00000000.00000000.00000000」
	↓		    ＝（10進数）「128.0.0.0」
	↓
	ホストアドレス　＝（2進数）ネットワーク部「1」＋ホスト部「0000000.00000000.00000001」～「11111111.11111111.11111110」
	↓　　　　　　　＝（10進数）「128.0.0.1」～「255.255.255.254」
	↓
	ブロードキャストアドレス　＝（2進数）ネットワーク部「1」＋ホスト部「11111111.11111111.11111111」＝「111111111.111111111.111111111.111111111」
			　　　 ＝（10進数）「255.255.255.255」

	今回はホスト部が31桁のため、アドレス数は2の31乗＝2,147,483,648個。ホストアドレス数は-2して2,147,483,646個
　　　　　※1オクテットが256（8桁）、4オクテット（32桁）で256*256*256*256なので、256*256*256*256/2などに変えてもOK

	今回のIPアドレスの範囲を2進数で表すと、「10000000.00000000.00000000.00000000」～「111111111.111111111.111111111.111111111」
	開始アドレスは上位ビットが10のためBクラス、終了クラスは上位ビットが1111のためEクラスになる
	判断はネットワークアドレスで行うため、クラスはBクラス



	＞回答
	ネットワークアドレス：128.0.0.0
	ホストアドレス：128.0.0.1～255.255.255.254
	ブロードキャストアドレス：255.255.255.255（アドレス数：2,147,483,648）
	IPアドレス：クラスB

ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー

　（４）	IPアドレス：172.16.0.1 / 30

	考え方は（１）と同様だが、プレフィックス表記のためそれをサブネットマスクに変換する。

	プレフィックス表記が「/30」のため、前から30桁目までがサブネットマスクになる。
	つまり、今回のIPアドレス「172.16.0.1」＝「10101100.00010000.00000000.00000001」は、
	「10101100.00010000.00000000.000000」がネットワーク部、「01」がホスト部。

	ネットワークアドレス　＝（2進数）ネットワーク部「10101100.00010000.00000000.000000」＋ホスト部「00」＝「10101100.00010000.00000000.00000000」
	↓		    ＝（10進数）「172.16.0.0」
	↓
	ホストアドレス　＝（2進数）ネットワーク部「10101100.00010000.00000000.000000」＋ホスト部「01」～「10」
	↓　　　　　　　＝（10進数）「172.16.0.1」～「172.16.0.2」
	↓
	ブロードキャストアドレス　＝（2進数）ネットワーク部「10101100.00010000.00000000.000000」＋ホスト部「11」＝「10101100.00010000.00000000.00000011」
			　　　 ＝（10進数）「172.16.0.3」

	今回はホスト部が2桁のため、アドレス数は2の2乗＝4個。ホストアドレス数は-2して2個
	※プレフィックス表記が30のため、全32桁のうち30桁がネットワーク部。差引して2桁がホスト部

	今回のIPアドレスの範囲を2進数で表すと、「10101100.00010000.00000000.000000」～「10101100.00010000.00000000.00000011」
	上位ビットが10のためBクラスになる



	＞回答
	ネットワークアドレス：172.16.0.0
	ホストアドレス：172.16.0.1～172.16.0.2
	ブロードキャストアドレス：172.16.0.3（アドレス数：4）
	IPアドレス：クラスB

ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー

　（５）	IPアドレス：172.16.0.1 / 20

	考え方は（１）と同様だが、プレフィックス表記のためそれをサブネットマスクに変換する。

	プレフィックス表記が「/20」のため、前から20桁目までがサブネットマスクになる。
	つまり、今回のIPアドレス「172.16.0.1」＝「10101100.00010000.00000000.00000001」は、
	「10101100.00010000.0000」がネットワーク部、「0000.00000001」がホスト部。

	ネットワークアドレス　＝（2進数）ネットワーク部「10101100.00010000.0000」＋ホスト部「0000.00000000」＝「10101100.00010000.0000000.00000000」
	↓		    ＝（10進数）「172.16.0.0」
	↓
	ホストアドレス　＝（2進数）ネットワーク部「10101100.00010000.0000」＋ホスト部「0000.00000001」～「1111.11111110」
	↓　　　　　　　＝（10進数）「172.16.0.1」～「172.16.15.254」
	↓
	ブロードキャストアドレス　＝（2進数）ネットワーク部「10101100.00010000.0000」＋ホスト部「1111.11111111」＝「10101100.00010000.00001111.11111111」
			　　　 ＝（10進数）「172.16.15.255」

	今回はホスト部が12桁のため、アドレス数は2の12乗＝4,096個。ホストアドレス数は-2して4,094個
	※プレフィックス表記が20のため、全32桁のうち20桁がネットワーク部。差引して12桁がホスト部

	今回のIPアドレスの範囲を2進数で表すと、「10101100.00010000.00000000.000000」～「10101100.00010000.00001111.11111111」
	上位ビットが10のためBクラスになる



	＞回答
	ネットワークアドレス：172.16.0.0
	ホストアドレス：172.16.0.1～172.16.15.254
	ブロードキャストアドレス：172.16.15.255（アドレス数：4096）
	IPアドレス：クラスB

ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー
ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー

-問2-
以下のサブネットマスクを求めましょう。

例）192.168.0.0を8つのサブネットに分割します。また最大で30のホストアドレスが必要となります。
回答）クラス：クラスC　サブネットマスク（255.255.255.0）
　　　サブネットワーク：8つのサブネット　3ビット必要
　　　ホストアドレス：30個
　　　サブネットマスク：11111111 11111111 11111111 11100000　27ビット
　　　　　　　　　　　：255.255.255.224

ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー
　

（１）192.168.0.0を16のサブネットに分割します。また最大で14のホストアドレスが必要となります。

	＞サブネットワークに分割するとは？
	※イメージ
	ネットワーク部とホスト部に分かれたアドレスのうち、ホスト部を減らしてその分でサブネットに分割していく。

	アドレス（2進数）「｜　　*～*　　　｜｜　　　  　　　　*～*　　　　　　　　  ｜」
	　　　　↓　　　　  ｜ネットワーク部 ｜｜　　　　　　　ホスト部　　　　　　　 ｜
　　　　　　　　　↓
	アドレス（2進数）「｜　　*～*　　　  ＋　　　   　*～*　　　　　 ｜｜　*～*　｜」
	　　　　　　　　　  ｜ネットワーク部  ＋ サブネットで分割した部分 ｜｜ホスト部 ｜


	つまり、①必要なホストアドレスを確保するには何ビット必要か？
	②サブネットで分割したい個数を表現するには何ビット必要か？を考える。

	＞前提となるアドレスのクラスを考える
	アドレス「192.168.0.0」はクラスCのため、サブネットマスクは「255.255.255.0」
	ネットワーク部24桁、ホスト部8桁

	＞①必要なホストアドレス数から、ホスト部のビット数を考える
	今回必要なホストアドレスは最大14。ネットワークアドレスとブロードキャストアドレスを加えると16個必要になる。
	2進数のアドレスにおいて16個確保するためには、4ビット必要になる（2の4乗＝16）
	イメージ
	アドレス（2進数）「｜　　*～*　　　＋　　　   　*～*　　　　　｜｜　　 ****　　  ｜」
	　　　　　　　　　  ｜ネットワーク部 ＋サブネットで分割した部分｜｜ホスト部（4桁）｜

	＞②分割したいサブネットワーク数から、何ビット必要かを考える
	今回は16のサブネットに分割したい。
	2進数のアドレスにおいて16に分けるためには、4ビット必要になる。（2の4乗＝16）
	イメージ
	アドレス（2進数）「｜　　*～*　　　＋　　　     ****　　　　　｜｜　　 ****　　  ｜」
	　　　　　　　　　  ｜ネットワーク部＋サブネットで分割した部分｜｜ホスト部（4桁）｜

	＞元々のネットワーク部と②でホスト部から削った部分を足した部分がサブネットマスクになる
	ネットワーク部＝24＋4桁、ホスト部4桁
	→2進数で表記すると、「11111111.11111111.11111111.00000000」になる
	→10進数では「255.255.255.0」

	>回答
	クラス：クラスC→サブネットマスク（255.255.255.0）＝11111111.11111111.11111111.00000000
	サブネットワーク：16個→4ビット（2の4乗）→11111111.11111111.11111111.11110000
	ホストアドレス：14個→ネットワーク・ブロードキャストアドレスを含めると16個→4ビットあったらOK→11111111.11111111.11111111.11110000でOK
	サブネットマスク：11111111.11111111.11111111.11110000（28ビット）
		　　　：255.255.255.240


ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー


　（２）192.168.0.0を32のサブネットに分割します。また最大で6のホストアドレスが必要となります。

	考え方は（１）と同様

	>回答
	クラス：クラスC→サブネットマスク（255.255.255.0）＝11111111.11111111.11111111.00000000
	サブネットワーク：32個→5ビット（2の5乗）→11111111.11111111.11111111.11111000
	ホストアドレス：6個→ネットワーク・ブロードキャストアドレスを含めると8個→3ビットあったらOK→11111111.11111111.11111111.11111000でOK
	サブネットマスク：11111111.11111111.11111111.11111000（29ビット）
		　　　：255.255.255.248

ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー